#!/usr/bin/env bash

# Lista de paquetes a instalar
paquetes=("acpi" "upower")

# Funci칩n para verificar si un paquete est치 instalado (Debian/Ubuntu/Kali)
paquete_instalado_apt() {
    dpkg -l "$1" | grep -q '^ii'  
}

# Funci칩n para verificar si un paquete est치 instalado (CentOS/RHEL)
paquete_instalado_yum() {
    yum list installed "$1" &> /dev/null
}

# Funci칩n para verificar si un paquete est치 instalado (Fedora)
paquete_instalado_dnf() {
    dnf list installed "$1" &> /dev/null
}

# Funci칩n para verificar si un paquete est치 instalado (Arch Linux)
paquete_instalado_pacman() {
    pacman -Qi "$1" &> /dev/null
}

# Detectar el sistema operativo
if [ -f /etc/os-release ]; then
    . /etc/os-release
    OS=$ID
fi

# Instalar paquetes basados en el sistema operativo
for paquete in "${paquetes[@]}"; do
    case $OS in
        "debian"|"ubuntu"|"kali")
            if ! paquete_instalado_apt "$paquete"; then
                echo "Instalando el paquete $paquete..."
                sudo apt-get install -y "$paquete"
            fi
            ;;
        "centos"|"rhel")
            if ! paquete_instalado_yum "$paquete"; then
                echo "Instalando el paquete $paquete..."
                sudo yum install -y "$paquete"
            fi
            ;;
        "fedora")
            if ! paquete_instalado_dnf "$paquete"; then
                echo "Instalando el paquete $paquete..."
                sudo dnf install -y "$paquete"
            fi
            ;;
        "arch")
            if ! paquete_instalado_pacman "$paquete"; then
                echo "Instalando el paquete $paquete..."
                sudo pacman -S --noconfirm "$paquete"
            fi
            ;;
        *)
            ;;
    esac
done

#!/usr/bin/env bash

battery_info=$(upower -i /org/freedesktop/UPower/devices/battery_BAT0)

energy_rate=$(echo "$battery_info" | grep -oP 'energy-rate:\s+\K[\d.]+')
time_to_full=$(echo "$battery_info" | grep -oP 'time to full:\s+\K[\d.]+')


# Colores con \e (o \033) y echo -e
echo -e "\e[36m==============================\e[0m"
echo -e "\e[36m   游댊  INFORMACI칍N BATER칈A\e[0m"
echo -e "\e[36m==============================\e[0m\n"

echo -e " \e[36mConsumo de energ칤a:\e[0m      \e[33m$energy_rate W\e[0m\n"
echo -e " \e[36mTiempo para carga completa:\e[0m \e[32m$time_to_full minutos\e[0m\n"

echo -e " \e[35mAdaptador de corriente:\e[0m\n"
acpi -a | sed "s/^/   \x1b[34m/;s/\$/\x1b[0m/"
echo -e "\n"

echo -e " \e[36mEstado de la bater칤a:\e[0m\n"
acpi -b | sed "s/^/   \x1b[31m/;s/\$/\x1b[0m/"
echo -e "\n\e[36m==============================\e[0m"
