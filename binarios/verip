#!/usr/bin/env bash

while true; do
  echo ""
  echo "Selecciona una opción:"
  echo "1) Ver logs de sshd (journalctl -xeu sshd.service)"
  echo "2) Mostrar ruta del ejecutable sshd (which sshd)"
  echo "3) Recargar systemd y reiniciar sshd (sudo systemctl daemon-reload && sudo systemctl restart sshd)"
  echo "4) Listar archivos del paquete openssh-server (rpm -ql openssh-server | grep sshd)"
  echo "5) Reinstalar openssh-server (sudo dnf reinstall openssh-server)"
  echo "6) Instalar openssh-server (sudo dnf install openssh-server)"
  echo "7) Instalar openssh-clients (sudo dnf install openssh-clients)"
  echo "8) Ejecutar comando personalizado"
  echo "9) Salir"
  read -rp "Ingresa el número de opción: " opt

  case "$opt" in
    1)
      cmd="journalctl -xeu sshd.service"
      ;;
    2)
      cmd="which sshd"
      ;;
    3)
      cmd="sudo systemctl daemon-reload && sudo systemctl restart sshd"
      ;;
    4)
      cmd="rpm -ql openssh-server | grep sshd"
      ;;
    5)
      cmd="sudo dnf reinstall openssh-server"
      ;;
    6)
      cmd="sudo dnf install openssh-server"
      ;;
    7)
      cmd="sudo dnf install openssh-clients"
      ;;
    8)
      read -rp "Ingresa el comando a ejecutar: " cmd
      ;;
    9)
      exit 0
      ;;
    *)
      echo "Opción no válida."
      continue
      ;;
  esac

  echo ""
  echo "Ejecutando: $cmd"
  echo "--------------------------------------------"
  eval "$cmd"
  echo "--------------------------------------------"
done