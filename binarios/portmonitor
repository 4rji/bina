#!/usr/bin/env bash

# Check if two arguments (host and port) are provided
if [ "$#" -ne 2 ]; then
  echo ""
  echo -e "  \033[1;31mUsage: $0 <host> <port>\033[0m"
  echo ""
  exit 1
fi

HOST="$1"
PORT="$2"
CHECK_CMD="nc -z \"$HOST\" \"$PORT\" >/dev/null 2>&1"

echo -e "  \033[1;33mMonitoring $HOST:$PORT (Ctrl+C to stop)\033[0m"
echo -e "  \033[1;36m$CHECK_CMD\033[0m"

while true; do
  if nc -z "$HOST" "$PORT" >/dev/null 2>&1; then
    echo -e "  [$(date '+%H:%M:%S')] \033[1;32mOPEN\033[0m $HOST:$PORT"
  else
    echo -e "  [$(date '+%H:%M:%S')] \033[1;31mCLOSED\033[0m $HOST:$PORT"
  fi
  sleep 5
done
